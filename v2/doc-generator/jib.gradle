jib {
    from {
        image = 'eclipse-temurin:21-jre-alpine'
        platforms {
            platform {
                architecture = 'amd64'
                os = 'linux'
            }
        }
    }
    to {
        image = 'pdf-generator-service' // Имя образа
        tags = [version]
    }
    extraDirectories {
        paths = [file('build/libs')]
        permissions = ['pdf-generator-service-${project.version}.jar': '755']
    }
    container {
        appRoot = '/app'
        ports = ['8081']
        creationTime = 'USE_CURRENT_TIMESTAMP'
        user = '1000:1000'

        jvmFlags = [
                '-Xms256m',
                '-Xmx512m',
                '-XX:MaxRAMPercentage=75.0',
                '-Djava.security.egd=file:/dev/./urandom'
        ]
        entrypoint = [
                "java", "-jar", "pdf-generator-service-${project.version}.jar" // Замените на имя JAR
        ]
        labels = [
                'maintainer': 'Fistedar-PC',
                'version': project.version as String
        ]
    }
}